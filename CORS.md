
### **ูุนูู ุฅูู CORSุ**

**ุงูู CORS** ุงุฎุชุตุงุฑ ูู **Cross-Origin Resource Sharing**ุ ูุงููู ูุนูุงูุง "ูุดุงุฑูุฉ ุงูููุงุฑุฏ ุจูู ููุงูุน ูุฎุชููุฉ".

ุงูููุถูุน ุฏู ุจูุฎุต **ุงูู Browser**ุ ูุจูุชุญูู ูู ุฅุฒุงู ูููุน ูุนูู ููุฏุฑ ูุทูุจ ุจูุงูุงุช ุฃู ูุชุนุงูู ูุน ุณูุฑูุฑ ุชุงูู (ูุนูู ุฏูููู ุชุงูู).

### **ุฅูู ุงููุดููุฉ ุฃุตูุงูุ**

ุงูู Browser ุจูุดุชุบู ุจุณูุงุณุฉ ุงุณููุง **Same-Origin Policy (SOP)**ุ ูุนูู:

> "ุงููููุน ูุงูููุนุด ูุทูุจ ุจูุงูุงุช ูู ุฏูููู ุชุงูู ุบูุฑ ุงููู ูู ุฌุงู ููู... ุฅูุง ูู ุงูุฏูููู ุงูุชุงูู ูุงูู."

ูุฏู ูุนูููุฉ ุนูุดุงู **ุชุญูู ุงููุณุชุฎุฏู** ูู ููุงูุน ุฎุจูุซุฉ ุชุญุงูู ุชุณุฑู ุจูุงูุงุชู.

### **ููุง ุจููุฌู ุฏูุฑ CORS**

ุงูู CORS ุจูุญู ุงููุดููุฉ ุฏูุ ูุจูุฎูู ููู **ุทุฑููุฉ ุขููุฉ** ุฅู ูููุน ูุชุนุงูู ูุน ุฏูููู ุชุงูู **ููู ุจุดูู ูุชุญูู ููู**.

ูุนูู ูู ุฃูุง ูุงุชุญ ูููุน `example.com`ุ ูุนุงูุฒ ุฃุทูุจ ุจูุงูุงุช ูู `api.another-site.com`ุ ุงูุณูุฑูุฑ ุงูุชุงูู ูุงุฒู **ูุจุนุช ูู ุงูููุฏุฑ ุฑุฏ ุงุณูู `Access-Control-Allow-Origin`** ูููู ููู ุฅูู ููุงูู ูุฏู ุจูุงูุงุช ูููููุน ุงูุฃูู.

### **ุทูุจุ ูู CORS ุจูุญูู ูู ุงููุฌูุงุชุ**

ุงูููุฑูุถ ุฅูู ุจูุณุงุนุฏ ูู ุงูุชุญููุ ููู:

> โ **ุงูู CORS ูุด ูุณููุฉ ุญูุงูุฉ ูู ูุฌูุงุช ุฒู CSRF (Cross-Site Request Forgery)**  
> โ ูู ูุฌุฑุฏ ุทุฑููุฉ ุชููู ููู ููุฏุฑ ูุชุนุงูู ูุน ุงูุณูุฑูุฑุ ููู **ูุด ุจูููุน ุงููุฌูู ููุณู** ูู ุงูุฅุนุฏุงุฏุงุช ุบูุท.

ูุนูู ูู ุงูุณูุฑูุฑ ุนุงูู ุฅุนุฏุงุฏุงุช CORS ุจุดูู ุบูุทุ ูููู ูููุน ุฎุจูุซ ูุณุชุบู ุฏู ูููุงุฌู ุงููุณุชุฎุฏููู.

---

### โ **ูุนูู ุฅูู Same-Origin Policyุ**

ูู **ุณูุงุณุฉ ุฃูุงู ูู ุงููุชุตูุญุงุช**ุ ููุนูุงูุง:

> "ุงููููุน ุงููู ุฅูุช ูุงุชุญู ูู ุงููุชุตูุญ **ูุงูููุนุด** ูุชูุงุนู (ูุนูู ูุงุฎุฏ ุฃู ูุนุฏู ุจูุงูุงุช) ูุน ูููุน ุชุงูู ุบูุฑ ููุณู... ุฅูุง ุจุดุฑูุท ุฎุงุตุฉ."

### ๐ง ุทุจ ูุนูู ุฅูู "Same-Origin" ุฃุตูุงูุ

ุงูู **Origin** ูุนูุงูุง ุฃุตูุ ูุงูููุตูุฏ ููุง ูู:

- **ุงูุจุฑูุชูููู**: ุฒู `http` ุฃู `https`
    
- **ุงูุฏูููู**: ุฒู `example.com`
    
- **ุงูุจูุฑุช**: ุฒู `3000:` ุฃู `80:`

### ๐ก๏ธ ููู ุนูููุง ุงูุณูุงุณุฉ ุฏูุ

ุงููุชุตูุญุงุช ุทุจููุช ุงูู Same-Origin Policy ุนูุดุงู **ุชุญูู ุจูุงูุงุช ุงููุณุชุฎุฏู**.  
ุชุฎูู ูู ุฅูุช ูุงุชุญ ูููุน ุงูุจููุ ููู ุชุจููุจ ุชุงูู ูุงุชุญ ูููุน ููู ููุฏ ุฎุจูุซุ  
ุงูููุฏ ุฏู ูููู ูุญุงูู ููุตู ูุจูุงูุงุช ุงูุจูู! ๐ฅถ

ุนูุดุงู ูุฏูุ ุงููุชุตูุญ ุจูููู:

> "ุฃูุง ูุด ูุฎูู ุงููููุน ุงูุฎุจูุซ ูุนุฑู ุญุงุฌุฉ ุนู ูููุน ุงูุจููุ ููุง ููุฑุฃ ุงูุจูุงูุงุช ุจุชุงุนุชู."

---
### ๐งฑ ุฃูู ุญุงุฌุฉ: ุงูู Same-Origin Policy "ุตุงุฑูุฉ ุฌุฏูุง"

ุฒู ูุง ุงุชููููุง ูุจู ูุฏูุ ุณูุงุณุฉ **Same-Origin** ุจุชุญูู ุงููุณุชุฎุฏููู ุนู ุทุฑูู ุฅููุง ุชููุน ุงูููุงูุน ุฅููุง ุชุชุนุงูู ูุน ุฏููููุงุช ุชุงููุฉ (ููุงูุน ุชุงููุฉ)ุ ูุฏู ูููุณ ููุฃูุงู...  
ููู ุฃููุงุช ุจูููู ููู **ุญุงูุงุช ูุด ููููุน ูุดุชุบู ูู ุบูุฑ ูุง ูุฎุงูู ุงููุงุนุฏุฉ ุฏู**!

### ๐ฏ ุทุจ ุฅูุชู ูุญุชุงุฌ "ูุฑุฎู" ุงูุณูุงุณุฉ ุฏู ุดููุฉุ

ูู ุญุงูุงุช ุฒู:

- ูููุน ุจูุชุนุงูู ูุน **subdomain** (ูุซูุงู `api.example.com` ุจูุชุนุงูู ูุน `www.example.com`)
    
- ุฃู ุจูุชุนุงูู ูุน **ููุงูุน ุฎุงุฑุฌูุฉ ููุซููุฉ** (ุฒู ูููุน ุจูุณุชุฎุฏู ุฎุฏูุฉ ุฏูุน ุฒู PayPal ุฃู Stripe)
    
- ุฃู ุจูุทูุจ ุจูุงูุงุช ูู **API ููุฌูุฏ ุนูู ุณูุฑูุฑ ุชุงูู**
    

ูู ูุงุฒู ููุงูู ุทุฑููุฉ ูุฎููู ุงููุชุตูุญ **ูุณูุญ ุจุงูุชุนุงูู ูุน ุงูุฏูููู ุงูุชุงูู**... ุจุณ **ุจุดูู ุขูู ููุชุญูู ููู**.

### ๐ ููุง ุจููุฌู ุฏูุฑ "Relaxation" of Same-Origin Policy

ูุนูู:

> **ูุฑุฎู ุดููุฉ** ูู ุงูุดุฑูุท ุจุชุงุนุฉ ุงูุณูุงุณุฉุ ููู ูุด ููุณุฑูุง ุชูุงููุง.

ูุฏู ุจูุชุญูู ุนู ุทุฑูู ุจุฑูุชูููู ุงุณูู:

### ๐ง ุงูู **CORS โ Cross-Origin Resource Sharing**

---
### ๐ก ุฅุฒุงู CORS ุจูุดุชุบูุ

ุงูู CORS ุจูุณุชุฎุฏู **ูุฌููุนุฉ ูู ุงูููุฏุฑุฒ (HTTP Headers)**  
ุงูููุฏุฑุฒ ุฏู ุจุชุชุจุนุช ูู ุงูุณูุฑูุฑ ูููุชุตูุญ ุนูุดุงู ุชููู ูู:

> "ุขูุ ุฃูุง ููุงูู ุฅู ูููุน ูุฐุง ูุทูุจ ููู ุจูุงูุงุชุ ููููู ููุงู ุฃุณูุญ ุจุงูููููุฒ ุฃู ุงูุฏุฎูู ุจุญุณุงุจ ูุณุชุฎุฏู."

ุงูููุฏุฑุฒ ุฏู ุจุชุชุถูู ูุนูููุงุช ุฒู:

- ููู ุงูุฏูููู ุงููุณููุญ ูู ูุทูุจ ุงูุจูุงูุงุช (ูุซูุงู: `https://myfrontend.com`)
    
- ูู ูุณูุญ ุจุงูููููุฒ ูุงูุฏุฎูู ุจุญุณุงุจุ (`Access-Control-Allow-Credentials`)
    
- ููุน ุงูุทูุจุงุช ุงููุณููุญ ุจููุง (GET โ POST โ PUTโฆ)
### ๐ ุฅุฒุงู ุจูุชู ุชุจุงุฏู ุงูููุฏุฑุฒุ

ููู ุฒู "ูุญุงุฏุซุฉ" ุจุชุญุตู ุจูู ุงููุชุตูุญ ูุงูุณูุฑูุฑ:

1. ุงููุชุตูุญ ุจูุจุนุช ุทูุจ ุงุณูู **Preflight Request** (ุงุณุชูุดุงูู)
    
2. ุงูุณูุฑูุฑ ุจูุฑุฏ ุนููู ุจุงูููุฏุฑุฒ ููููู: "ุฃูููุ ุฃูุง ููุงูู"
    
3. ุงููุชุตูุญ ูู ุดุงู ุงูุฑุฏ ููุงููุ ุจูููู ุงูุทูุจ ุงูุฃุณุงุณู.

### ๐ฅ ูุนูู ุฅูู "Vulnerabilities arising from CORS configuration issues"ุ

ูุนูู:

> "ุซุบุฑุงุช ุฃู ูุดุงูู ุฃูุงู ุจุชุญุตู ุจุณุจุจ ุฅุนุฏุงุฏุงุช CORS ุงูุบูุท."

### ๐ง ุงูุฎูููุฉ:

ุงูููุงูุน ุงูุญุฏูุซุฉ ูุชูุฑ ุจุชุณุชุฎุฏู **CORS** ุนูุดุงู ุชุฎููู ููู ุชูุงุตู ุจูู ุงููููุน ุงูุฑุฆูุณู ู:

- ุงูู **Subdomains** (ุฒู `api.example.com`)
    
- ุฃู **ุฃุทุฑุงู ุฎุงุฑุฌูุฉ ููุซูู ูููุง** (ุฒู ุฎุฏูุงุช ุงูุฏูุน ุฃู ููุงูุน ุชุงููุฉ ุดุบุงูุฉ ูุนุงูุง)
    

ูุฏู ุญุงุฌุฉ ูููุณุฉ ููููุฉุ ุจุณ...

### โ๏ธ ุงููุดููุฉ ูููุ

ุจุนุถ ุงููุทูุฑูู ููุง ุจููุฌูุง ูุธุจุทูุง ุฅุนุฏุงุฏุงุช CORSุ ูููู:

- **ูุบูุทูุง** ูู ุงูุฅุนุฏุงุฏุงุช
    
- ุฃู ูุชุณุงูููุง ุฃูู ุนูุดุงู "ูู ุญุงุฌุฉ ุชุดุชุบู" ุจุฏูู ูุดุงูู
    

ููู ุฏู ูููู ููุชุญ ุงูุจุงุจ ููุฌูุงุช ูุงุฎุชุฑุงูุงุช!

### ๐งจ ุฃูุซูุฉ ุนูู ุฅุนุฏุงุฏุงุช ุฎุงุทุฆุฉ ูุฎุทูุฑุฉ:

#### 1. ุงูุณูุงุญ ููู ุงูููุงูุน ุจุงููุตูู:
```http
Access-Control-Allow-Origin: *
```
ุฏู ูุนูุงู:

> "ุฃู ูููุน ูู ุงูุฏููุง ููุฏุฑ ูุทูุจ ุจูุงูุงุช ูู ุงูุณูุฑูุฑ ุจุชุงุนู!"

ูุฏู ูุงุฑุซุฉุ ุฎุตูุตูุง ูู ุงูุณูุฑูุฑ ุจูุฑุฌุน **ุจูุงูุงุช ุญุณุงุณุฉ** (ุฒู ูุนูููุงุช ุญุณุงุจุงุช ุฃู ุจูุงูุงุช ูุณุชุฎุฏููู).

---

#### 2. ุงูุณูุงุญ ุจุงูุฏูููู ุงููู ุฌุงู ูู ุงูุทูุจ (ุฏููุงูููููุง) ูู ุบูุฑ ุชุญูู:

ูุนูู ุงูุณูุฑูุฑ ุจูููู:
```javascript
res.setHeader('Access-Control-Allow-Origin', req.headers.origin);
```
ุฏู ูุนูุงู:

> "ุฃู ูููุน ูุจุนุชููุ ุฃูุง ูุฑุฏ ุนููู ูุฃูู ูุงุซู ููู!"  
> ูุฏู ุจูุฎููู ุงููุงูุฑุฒ ููุฏุฑูุง **ูุจุนุชูุง ุทูุจุงุช ุจุงุณู ููุงูุนูู ููุงุฎุฏูุง ุงูุฑุฏ ุนุงุฏู ุฌุฏูุง**.

---

#### 3. ุงูุณูุงุญ ุจู Credentials ูุน `*`:
```http
Access-Control-Allow-Origin: *
Access-Control-Allow-Credentials: true
```
ุงููุชุตูุญ ูู ุงูุญุงูุฉ ุฏู **ุจูุฑูุถ** ุงูุทูุจุ ุจุณ ุฏู ุชุนุชุจุฑ **ุฅุนุฏุงุฏุงุช ุบูุท ูุฎุทูุฑุฉ** ูู ุงุชุญุงูู ุนูููุง ูููู ุชุณุจุจ ุซุบุฑุฉ.

### ๐ ุทูุจ ุฅุฒุงู ูุชุฌูุจ ุงูุซุบุฑุงุช ุฏูุ

- ุญุฏุฏ ุจุฏูุฉ ุงูููุงูุน ุงููุณููุญ ููุง (ูุซูุงู `https://myfrontend.com` ุจุณ)
    
- ูุงุชุณุชุฎุฏูุด `*` ูุน ูุนูููุงุช ุญุณุงุณุฉ ุฃู ูุน ุงูููููุฒ
    
- ูุงุชุฎููุด ุงูุฅุนุฏุงุฏุงุช ุฏููุงููููุฉ ูู ุบูุฑ ุชุญูู
    
- ุงุฎุชุจุฑ ุฅุนุฏุงุฏุงุช CORS ุจุชุงุนุชู ูููุณ ุฌุฏูุง


### ููู ููุง ุจุจูุบ ุซุบุฑุฉ CORS misconfiguration ุจุชุชุฑูุถุ

ูู ูุงุญุฏ ุจุณ ูู ุงูุดุฑูุท ุงูุชุงููุฉ ูุชุญููุด, ูุฏู ุจุฅุฎุชุตุงุฑ ูุด ุซุบุฑุฉ misconfigured cors ููุด ูุชุชูุจู.

- ูุงุฒู ูุจูู ุงูููุฏุฑุฒ ุงููู ูู ุงูุฑูุณุจููุณ ูููุง ููุงู ุงูููุฏุฑ ุจุชุงุน Access-Control-Allow-Credentials ูุชููู ูููุชู True ุนุดุงู ูุจูู ูุณููุญูู ุชุนูู authenticated requests
    

- ูุงุฒู ููุจูุงุด ูู ุงู ููุฏุฑ ุฒูุงุฏุฉ ูู ุงูุฑููุณุช ููุณูุง ุฒู ุงู authorization ูุบูุฑู ุนุดุงู ุฏู ูุด ููุฎููู ุชูุฏุฑ ุชุณุชุบู ุงูุซุบุฑุฉ ูุงูู ูุด ูุชุนุฑู ุชุถูู ููุฏุฑ ููุฑููุณุช
    

- ูุฃุฎูุฑุง, ูุงุฒู ูุจูู ุงูุตูุญุฉ ููุณูุง ูููุง ุจูุงูุงุช ูููู ูุฅูุง ุงููุฎุชุฑู ููุณุชููุฏ ุงูู ูู ุงุณุชุบููุง ูู ุบูุฑ ูุง ูููู ูู ุงูุตูุญู ุจูุงูุงุช ููููุ
    

ุญุงุฌุฉ ุฃุฎูุฑุฉ ูุญุชุงุฌ ุฃุฃูุฏ ุนูููุง ูุชูุฑ, ููู ุงูู ูุงุฒู ุงูุฃูู ุชููู ุงูู ูู ุงู CORS ูููู ุงูุง ููุจุฑูุฌ ูุญุชุงุฌ ุฃุฎูููุง ูุชุงุญู ูู ูููุนูุ ูุฃู ุฒู ูุง ูููุช ูุงุฒู ุชููู ุงูุชูููููุฌู ุงูุฃูู ุนุดุงู ุชุนุฑู ุชููู ุซุบุฑุงุชูุง.

